SamplerState sampler0 : register ( s0 );
Texture3D ColorStrip  : register ( t0 );
Texture2D DiffuseTexture  : register ( t1 );

struct VS_OUTPUT
{
	float4 pos : SV_POSITION0;
	float2 uv : TEXCOORD;
};


float4 main(VS_OUTPUT input) : SV_Target
{	
    const float3 lutSize = float3(16,16,16);
    const float3 scale = ( lutSize - 1.0 ) / lutSize;
    const float3 offset = 1.0 / ( 2.0 * lutSize);

    float4 raw = DiffuseTexture.Sample(sampler0, input.uv);

    return ColorStrip.Sample(sampler0, scale * raw, offset);
}