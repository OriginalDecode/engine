
SamplerState sampler0 : register ( s0 );
Texture2D ParticleTexture : register ( t0 );
Texture2D NormalTexture : register ( t1 );
Texture2D DepthTexture : register ( t8 );

struct VS_OUTPUT
{
	float4 pos : SV_POSITION;
	float4 normal : NORMAL;
	float2 size : SIZE;
	float2 alpha : ALPHA;
	float2 uv : TEXCOORD;
};

float4 main(VS_OUTPUT input) : SV_Target
{
	float4 diffuse = ParticleTexture.Sample(sampler0, input.uv);
	float4 depth = DepthTexture.Sample(sampler0, input.uv);
	float4 normal = NormalTexture.Sample(sampler0, input.uv);
	float4 light_dir = float4(0,-1,0,1);
	float ndl = dot( normal, -light_dir);
	
	return diffuse + (diffuse * ndl);

	return float4(normal.rgb, 1);
};
